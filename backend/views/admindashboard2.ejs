<!DOCTYPE html>
<html>
<head>
  <title>Admin Dashboard</title>
  <link rel="stylesheet" href="/styles/Admindashboard.css">
  <script src="/scripts/admin.js" defer></script>
</head>
<body>
  <header>
            <a href="http://localhost:3000/dashboard" style="text-decoration: none;"><p class="logo">Campus<span>C</span>onnect</p></a>
            <% if (locals.title) { %>
                <div>|</div>
                <a href="http://localhost:3000/login"><p>Log in</p></a>
                <a href="http://localhost:3000/signup" style="text-decoration: none;"><div id="signup"><p>Sign up</p></div></a>
            <% } else{ %>
            <!-- <a href="" class="notification"><img src="/assets/notification(1) 1.png" alt="notification"></a> -->
            <a href="/profile" class="profile"><img src="/assets/user(2) 1.png" alt="profile"></a>
            <% } %>
  </header>
  <div class="sidebar">
        <ul>
            <li><a href="http://localhost:3000/problemslvfrm"><img src="/assets/question-and-answer 1.png" alt=""> <span class="text">Q&A<span>Forum</span></span></a></li>
            <li><a href="http://localhost:3000/attendance"><img src="/assets/attendance 1.png" alt=""> <span class="text">Attendance<span>Tracking</span></span></a></li>
            <li><a href="http://localhost:3000/bellgraph"><img src="/assets/wave-graph 1.png" alt=""> <span class="text">Grade<span>Prediction</span></span></a></li>
        </ul>
    </div>
  <main>
    <div class="welcome">
      <h3>Dashboard</h3>
      <p class="wb">Welcome back,</p>
      <p><%= name %></p>
    </div>
    <h2>Add New Course</h2>
    <form id="add-course-form" action="/admin/dashboard" method="POST">
      <input type="hidden" name="action" value="add-course">
      <label for="name">Course Name:</label>
      <input type="text" id="name" name="name" placeholder="Enter course name" required>
      <br>
      <label for="section">Section:</label>
      <input type="text" id="section" name="section" placeholder="Enter section" required>
      <br>
      <label for="totalclasses">Total Classes:</label>
      <input type="number" id="totalclasses" name="totalclasses" min="1" placeholder="Enter total classes" required>
      <br>
      <label for="credits">Credits:</label>
      <input type="number" id="credits" name="credits" min="1" placeholder="Enter credits" required>
      <br>
      <label for="professor">Professor:</label>
      <select id="professor" name="professor" required>
        <option value="">Select a Professor</option>
        <% professors.forEach(prof => { %>
          <option value="<%= prof._id %>"><%= prof.name %> (<%= prof.email %>)</option>
        <% }) %>
      </select>
      <br>
      <button type="submit">Add Course</button>
    </form>
    <div id="error-message" class="course-error"></div>

    <h2 id="student-form-title">Add New Student</h2>
    <button id="toggle-student-mode" class="toggle-btn">Switch to Remove Student</button>
    <form id="student-form" action="/admin/dashboard" method="POST">
      <input type="hidden" name="action" value="add-student">
      <div id="student-form-fields">
        <label for="student-name">Name:</label>
        <input type="text" id="student-name" name="name" placeholder="Enter student name" required>
        <br>
        <label for="student-email">Email:</label>
        <input type="email" id="student-email" name="email" placeholder="Enter student email" required>
        <br>
        <label for="student-rollnumber">Roll Number:</label>
        <input type="text" id="student-rollnumber" name="rollnumber" placeholder="Enter roll number" required>
        <br>
        <label for="student-phone">Phone:</label>
        <input type="text" id="student-phone" name="phone" placeholder="Enter 10-digit phone number" required>
        <br>
        <label for="student-section">Section:</label>
        <input type="text" id="student-section" name="section" placeholder="Enter section" required>
        <br>
      </div>
      <button type="submit" id="student-submit-btn">Add Student</button>
    </form>
    <div id="student-error-message" class="student-error"></div>

    <h2>Existing Courses</h2>
    <% if (courses.length > 0) { %>
      <ul class="course-list">
        <% courses.forEach(course => { %>
          <li>
            <%= course.name %> (Section <%= course.section %>) - 
            Professor: <%= course.professor.name %> - 
            Credits: <%= course.credits %> - 
            Total Classes: <%= course.totalclasses %>
          </li>
        <% }) %>
      </ul>
    <% } else { %>
      <p class="no-items">No courses available.</p>
    <% } %>

    <h2>Existing Professors</h2>
    <% if (professors.length > 0) { %>
      <ul class="professor-list">
        <% professors.forEach(prof => { %>
          <li>
            <%= prof.name %> - Email: <%= prof.email %> - Phone: <%= prof.phone %>
          </li>
        <% }) %>
      </ul>
    <% } else { %>
      <p class="no-items">No professors available.</p>
    <% } %>

    <h2>Existing Students</h2>
    <% if (students.length > 0) { %>
      <ul class="student-list">
        <% students.forEach(student => { %>
          <li>
            <%= student.name %> - Email: <%= student.email %> - Roll Number: <%= student.rollnumber %> - Phone: <%= student.phone %> - Section: <%= student.section %>
          </li>
        <% }) %>
      </ul>
    <% } else { %>
      <p class="no-items">No students available.</p>
    <% } %>

    <a href="/" class="back-home">Back to Home</a>
  </main>
</body>
</html>